{% extends 'mechanicus/base.html' %}
{% load i18n %}
{% load humanize %}
{% block details %}
<script>
function showForm(action) {
	iframe = document.getElementById("jobsFormIframe");
	iframe.src = "jobs/forms/" + action
	iframe.style.display = "initial"
}
</script>

    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Jobs</h3>
        </div>
        <div class="panel-body" style="min-height: 100px;">
            {{ text }}
			<table class="steelBlueCols" style="min-height: 100px;">
				<tr>
					<td>Actions</td>
					<td>Creator</td>
					<td>Assigner</td>
					<td>Assigned To</td>
					<td>Parent</td>
					<td>Root</td>
					<td>Product</td>
				</tr>
			{% for job_entry in job_display_list %}
				<tr>
					<td>
						{% for formAction in formActions %}
							{% if formAction == "assign" %}
								{% if job_entry.assignee == Null %}
									<button class="action" onclick="showForm('{{formAction}}')">{{formAction|make_list|first}}</button>
								{% endif %}
							{% elif formAction == "create" %}
								{{pass}}
							{% else %}
								<button class="action" onclick="showForm('{{formAction}}')">{{formAction|make_list|first}}</button>
							{% endif %}
						{% endfor %}
					</td>
					<td>{{job_entry.creator}}</td>
					<td>{{job_entry.assigner}}</td>
					<td>{{job_entry.assignee|default:"Unassigned"}} </td>
					<td>{{job_entry.parent}}</td>
					<td>{{job_entry.root}}</td>
					<td>{{job_entry.product}}</td>
				</tr>
			{% endfor %}
			</table>
        </div>
    </div>
	
	<iframe id="jobsFormIframe" class="formIframe">
	</iframe>
	
	
{% endblock %}
{% block extra_javascript %}
{% endblock %}

{% block extra_css %}
<style>
iframe.formIframe
{
	display: none;
	position: fixed;
	top: 30%;
	left: 10%;
	width: 80%;
	background-color: white;
}
action.btn {
  -webkit-border-radius: 4;
  -moz-border-radius: 4;
  border-radius: 4px;
  color: #000000;
  font-size: 20px;
  background: #3989a4;
  text-decoration: none;
}
table.steelBlueCols {
  border: 4px solid #555555;
  background-color: #555555;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.steelBlueCols td, table.steelBlueCols th {
  border: 1px solid #555555;
  padding: 5px 10px;
}
table.steelBlueCols tbody td {
  font-size: 12px;
  font-weight: bold;
  color: #FFFFFF;
}
table.steelBlueCols td:nth-child(even) {
  background: #398AA4;
}
table.steelBlueCols thead {
  background: #398AA4;
  border-bottom: 10px solid #398AA4;
}
table.steelBlueCols thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: left;
  border-left: 2px solid #398AA4;
}
table.steelBlueCols thead th:first-child {
  border-left: none;
}

table.steelBlueCols tfoot td {
  font-size: 13px;
}
table.steelBlueCols tfoot .links {
  text-align: right;
}
table.steelBlueCols tfoot .links a{
  display: inline-block;
  background: #FFFFFF;
  color: #398AA4;
  padding: 2px 8px;
  border-radius: 5px;
}
</style>
{% endblock %}

{% block extra_script %}

{% endblock %}
